{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\n\nimport { iziTimerError } from \"./iziToastCustom\";\n\nlet daysTimer = document.querySelector('span[data-days]');\nlet hoursTimer = document.querySelector('span[data-hours]');\nlet minutesTimer = document.querySelector('span[data-minutes]');\nlet secondsTimer = document.querySelector('span[data-seconds]');\n\nconst startBtn = document.querySelector('button[data-start]');\n\n\nlet userSelectedDate = 0;\nconst oneSecond = 1000;\nlet leftTime = 0;\n\ntoggleStartButtonDisabledState(true);\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: Date.now(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0].getTime();\n        if (checkTheValidDate(userSelectedDate)) {\n            toggleStartButtonDisabledState(false);\n        }\n    },\n};\n\nflatpickr('#datetime-picker', options);\n\nconst checkTheValidDate = (userSelectedDate) => {\n    const currentDate = new Date();\n    if (userSelectedDate < currentDate.getTime()) {\n        iziToast.error(iziTimerError);\n        return false;\n    } else {\n        return true;\n    }\n}\n\nstartBtn.addEventListener('click', handleStartTimer);\n\n\nfunction handleStartTimer() {\n    startBtn.removeEventListener('click', handleStartTimer);\n    toggleStartButtonDisabledState(true);\n    leftTime = userSelectedDate - Date.now();\n\n    const intervalID = setInterval(() => {\n        const { days, hours, minutes, seconds } = convertMs(leftTime);\n\n        daysTimer.textContent = formatNumber(days);\n        hoursTimer.textContent = formatNumber(hours);\n        minutesTimer.textContent = formatNumber(minutes);\n        secondsTimer.textContent = formatNumber(seconds);\n\n        if (leftTime > oneSecond) {\n            leftTime -= oneSecond;\n        } else {\n            clearInterval(intervalID);\n            toggleStartButtonDisabledState(true);\n        }\n    }, oneSecond);\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = oneSecond;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n\nfunction formatNumber(number) {\n    return number >= 10 ? number : `0${number}`\n}\nfunction toggleStartButtonDisabledState(res) {\n    return res ? startBtn.setAttribute('disabled', '') : startBtn.removeAttribute('disabled');\n}\n\n\n\n"],"names":["daysTimer","hoursTimer","minutesTimer","secondsTimer","startBtn","userSelectedDate","oneSecond","leftTime","toggleStartButtonDisabledState","options","selectedDates","checkTheValidDate","flatpickr","currentDate","iziToast","iziTimerError","handleStartTimer","intervalID","days","hours","minutes","seconds","convertMs","formatNumber","ms","second","minute","hour","day","number","res"],"mappings":"mJAMA,IAAIA,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAE9D,MAAMC,EAAW,SAAS,cAAc,oBAAoB,EAG5D,IAAIC,EAAmB,EACvB,MAAMC,EAAY,IAClB,IAAIC,EAAW,EAEfC,EAA+B,EAAI,EAEnC,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,KAAK,IAAK,EACvB,gBAAiB,EACjB,QAAQC,EAAe,CACnBL,EAAmBK,EAAc,GAAG,QAAO,EACvCC,EAAkBN,CAAgB,GAClCG,EAA+B,EAAK,CAE3C,CACL,EAEAI,EAAU,mBAAoBH,CAAO,EAErC,MAAME,EAAqBN,GAAqB,CAC5C,MAAMQ,EAAc,IAAI,KACxB,OAAIR,EAAmBQ,EAAY,WAC/BC,EAAS,MAAMC,CAAa,EACrB,IAEA,EAEf,EAEAX,EAAS,iBAAiB,QAASY,CAAgB,EAGnD,SAASA,GAAmB,CACxBZ,EAAS,oBAAoB,QAASY,CAAgB,EACtDR,EAA+B,EAAI,EACnCD,EAAWF,EAAmB,KAAK,MAEnC,MAAMY,EAAa,YAAY,IAAM,CACjC,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUf,CAAQ,EAE5DP,EAAU,YAAcuB,EAAaL,CAAI,EACzCjB,EAAW,YAAcsB,EAAaJ,CAAK,EAC3CjB,EAAa,YAAcqB,EAAaH,CAAO,EAC/CjB,EAAa,YAAcoB,EAAaF,CAAO,EAE3Cd,EAAWD,EACXC,GAAYD,GAEZ,cAAcW,CAAU,EACxBT,EAA+B,EAAI,EAE1C,EAAEF,CAAS,CAChB,CAEA,SAASgB,EAAUE,EAAI,CAEnB,MAAMC,EAASnB,EACToB,EAASD,EAAS,GAClBE,EAAOD,EAAS,GAChBE,EAAMD,EAAO,GAGbT,EAAO,KAAK,MAAMM,EAAKI,CAAG,EAE1BT,EAAQ,KAAK,MAAOK,EAAKI,EAAOD,CAAI,EAEpCP,EAAU,KAAK,MAAQI,EAAKI,EAAOD,EAAQD,CAAM,EAEjDL,EAAU,KAAK,MAASG,EAAKI,EAAOD,EAAQD,EAAUD,CAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAASE,EAAaM,EAAQ,CAC1B,OAAOA,GAAU,GAAKA,EAAS,IAAIA,GACvC,CACA,SAASrB,EAA+BsB,EAAK,CACzC,OAAOA,EAAM1B,EAAS,aAAa,WAAY,EAAE,EAAIA,EAAS,gBAAgB,UAAU,CAC5F"}